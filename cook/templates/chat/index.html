{% extends 'base.html' %}
{% load static %}

{% block title %}
  <title>Chat</title>
{% endblock title %}

{% block css %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.2/css/bulma.min.css">
{% endblock %}

{% block content %}
<section class="categories categories-grid spad">
    <div class="categories__post">
        <div class="container">
            <div class="categories__grid__post">
                <div class="row">
                    <div class="col-lg-8 col-md-8">
                        <div class="column is-6 is-offset-3 mb-6">
                            <section class="hero is-primary">
                                <div class="hero-body">
                                    <p class="title">
                                        Chat
                                    </p>
                                    <p class="subtitle">
                                        A simple chat built with Django, Channels and Redis
                                    </p>
                                </div>
                            </section>
                        </div>

                        <div class="column is-4 is-offset-4">
                            <div class="field">
                                <label>Room name</label>

                                <div class="control">
                                    <input class="input" type="text" placeholder="Room name" id="room-name-input">
                                </div>
                        </div>

                        <div class="field">
                            <label>Username</label>
                            <div class="control">
                                <input class="input" type="text" placeholder="Username" id="username-input">
                            </div>
                        </div>

                        <div class="field">
                            <div class="control">
                                <a class="button is-info" id="room-name-submit">Submit</a>
                            </div>
                        </div>
                    </div>
                </div>

                {% include 'include/sidebar.html' %}

                </div>
            </div>
        </div>
    </div>
</section>

{% endblock %}

{% block scripts %}
<script>
    document.querySelector('#room-name-input').focus();
    document.querySelector('#room-name-submit').onclick = function(e) {
        var roomName = document.querySelector('#room-name-input').value;
        var userName = document.querySelector('#username-input').value;
        window.location.replace(roomName + '/?username=' + userName);
    };
</script>
{% endblock %}
